<?xml version="1.0"?>
<launch>

	<arg name="device" default="/dev/video2" />
    <arg name="camera_cfg" default="logitech.yaml" />
    <arg name="camera_name" default="logitech" />
    <arg name="num_fiducials" default="5"/>


    <group ns="cam">
        <node pkg="usb_cam" type="usb_cam_node" name="usb_cam" output="screen">
            <param name="video_device" value="$(arg device)" />
            <param name="camera_info_url" value="file://$(find uav_positioning)/cfg/$(arg camera_cfg)" />
            <param name="camera_name" value="$(arg camera_name)" />
            <param name="image_width" value="1280" />
            <param name="image_height" value="720" />
            <param name="pixel_format" value="mjpeg" />
            <param name="camera_frame_id" value="usb_cam" />
            <param name="io_method" value="mmap"/>
        </node>

        <node pkg="tuw_aruco" type="aruco_node" name="aruco" output="screen">
            <param name="show_debug_image" value="true"/>
            <param name="marker_dictonary" value="ARUCO_MIP_36h12"/>
            <param name="marker_size" value="0.05"/>
            <param name="publish_tf" value="true"/>
            <param name="publish_markers" value="true"/>
            <param name="publish_fiducials" value="true"/> 
            <param name="pose_estimation_enabled" value="true"/>
            <remap from="image" to="/cam/usb_cam/image_raw"/>
            <remap from="camera_info" to="/cam/usb_cam/camera_info"/>
        </node>

        <node pkg="uav_positioning" type="single_camera_node" name="camera" output="screen">
            <param name="num_fiducials" value="$(arg num_fiducials)" />
            <param name="dx_camera" value="0.0"/>
            <param name="dy_camera" value="0.0"/>
            <param name="dz_camera" value="0.0"/>
            <param name="rotation_camera" value="0.0"/>        
        </node> 

    </group>


    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find uav_positioning)/launch/rviz_config/single_camera.rviz"/>

</launch>

